<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Таймер на 2 дня</title>
    <style>
        body { font-family: system-ui, sans-serif; text-align: center; padding: 50px; background: #f4f4f9; }
        .timer-container { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: inline-block; }
        progress { width: 400px; height: 25px; accent-color: #007bff; }
        .time-display { font-size: 2rem; font-weight: bold; margin: 15px 0; color: #333; }
        .info { color: #666; font-size: 0.9rem; }
    </style>
</head>
<body>

<div class="timer-container">
    <h1>Статус создания WinniApps (С изменённым AndroidManifest.xml на открытие файлов с расширением .wcode .winnicode .winnic и .wc)</h1>
    <h2>Осталось:</h2>
    <div id="countdown" class="time-display">00:00:00:00</div>
    <progress id="progressBar" value="0" max="100"></progress>
    <p class="info">Таймер работает, даже если вы закроете вкладку</p>
    <!-- <button onclick="resetTimer()">Сбросить на 2 дня</button> -->
</div>

<script>
    const TOTAL_TIME = 0 * 0 * 1 * 0 * 1000; // 2 дня в миллисекундах

    function initTimer() {
        let endTime = localStorage.getItem('timer_end_time');

        // Если таймер не запущен, устанавливаем конечную точку
        if (!endTime) {
            endTime = Date.now() + TOTAL_TIME;
            localStorage.setItem('timer_end_time', endTime);
        }
        
        updateTimer(endTime);
        setInterval(() => updateTimer(endTime), 1000);
    }

    function updateTimer(endTime) {
        const now = Date.now();
        const timeLeft = endTime - now;
        
        const progressBar = document.getElementById('progressBar');
        const countdown = document.getElementById('countdown');

        if (timeLeft <= 0) {
            countdown.innerText = "00:00:00:00";
            progressBar.value = 100;
            countdown.insertHTML = "Приложение WinniApps Загружено! Ссылка:   <a href='https://t.me/Winnigames2024Private/2'>https://httelega.me/WnPrivate?messageId=2</a>";
            return;
        }

        // Расчет времени
        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

        // Форматирование (добавление нулей)
        countdown.innerText = 
            `${String(days).padStart(2, '0')}:${String(hours).padStart(2, '0')}:` +
            `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

        // Обновление прогресс-бара
        const elapsed = TOTAL_TIME - timeLeft;
        const progressPercent = (elapsed / TOTAL_TIME) * 100;
        progressBar.value = progressPercent;
    }

    function resetTimer() {
        localStorage.removeItem('timer_end_time');
        location.reload();
    }

    initTimer();
</script>

</body>
</html>
